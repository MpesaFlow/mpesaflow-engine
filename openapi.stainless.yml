# yaml-language-server: $schema=https://app.stainlessapi.com/config.schema.json

organization:
  name: mpesaflow
  docs: https://docs.mpesaflow.com
  contact: support@mpesaflow.com

targets:
  node:
    package_name: mpesaflow
    production_repo: Mpesaflow/mpesaflow-node
    publish:
      npm: true
  python:
    package_name: mpesaflow
    production_repo: Mpesaflow/mpesaflow-python
    publish:
      pypi: true
  java:
    reverse_domain: com.mpesaflow.api
    production_repo: Mpesaflow/mpesaflow-java
    publish:
      maven: true

client_settings:
  opts:
    bearer_token:
      type: string
      description: Bearer token used for authentication
      nullable: false
      read_env: BEARER_TOKEN
      auth:
        security_scheme: BearerAuth
        role: value

environments:
  production: https://api.mpesaflow.com
  sandbox: https://sandbox-api.mpesaflow.com

pagination:
  - name: cursor_id_pagination
    type: cursor_id
    request:
      starting_after:
        type: string
        x-stainless-pagination-property:
          purpose: next_cursor_id_param
      ending_before:
        type: string
        x-stainless-pagination-property:
          purpose: previous_cursor_id_param
      limit:
        type: integer
    response:
      data:
        type: array
        items:
          type: object
          properties:
            id:
              type: string
              x-stainless-pagination-property:
                purpose: cursor_item_id
          required:
            - id

resources:
  apps:
    models:
      application: Application
    methods:
      create: post /apps/create
      list:
        endpoint: get /apps/list
        paginated: cursor_id_pagination
      delete: delete /apps/{appId}
    subresources:
      api_keys:
        methods:
          create: post /apps/{appId}/api-keys/create
          list:
            endpoint: get /apps/{appId}/api-keys/list
            paginated: cursor_id_pagination
          delete: delete /apps/{appId}/api-keys/{apiKeyId}

  transactions:
    models:
      transaction: Transaction
    methods:
      create: post /transactions/create
      list:
        endpoint: get /transactions/list
        paginated: cursor_id_pagination
      retrieve: get /transactions/{transactionId}

  $client:
    methods:
      health: get /health

settings:
  license: Apache-2.0

readme:
  example_requests:
    default:
      type: request
      endpoint: post /apps/create
      params: &ref_0 {}
    headline:
      type: request
      endpoint: post /apps/create
      params: *ref_0
    pagination:
      type: request
      endpoint: get /apps/list
      params: {}